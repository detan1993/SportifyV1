<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template/masterPage.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html">


    <ui:define name="west">
        <h:outputStylesheet name="css/ui-override.css" />
        <p:panel>
            <p:panel style="text-align: center;">
                <f:facet name="header">
                    PRODUCT DETAILS 
                </f:facet>
                <br />
                <h:panelGroup id="qtyOnChange">
                    <h:outputText style="font-size: 60px" value="$#{viewDetailedManagedBean.priceOnChange} "></h:outputText>
                </h:panelGroup>
            </p:panel>
            <p:panel style="margin-top:-20px;">
                <h:form>
                    <p:growl id="growl" life="2000"/> 
                    <table cellspacing="5">
                        <tr>
                            <td>
                                <span style="color:white;font-size:15px">Size :</span> 
                            </td>
                            <td>
                                <p:selectOneMenu id="prod_size" value="#{viewDetailedManagedBean.sizeSelected}" required="true" requiredMessage="Please select size.">
                                    <f:selectItem itemLabel="Select Size" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{viewDetailedManagedBean.sizeDropDown}" />
                                </p:selectOneMenu>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span style="color:white;font-size:15px">Quantity :</span> 
                            </td>
                            <td>
                                <p:spinner id="quantity" value="#{viewDetailedManagedBean.quantity}" required="true" label="quantity" requiredMessage="Please enter quantity." size="4" min="1">
                                    <p:ajax listener="#{viewDetailedManagedBean.qtyOnChange}" update="#{p:component('qtyOnChange')}" process="@this" />   
                                </p:spinner> 
                            </td>
                        </tr>
                        <tr>

                            <td colspan="2">
                                <br />
                               

                            </td>
                        </tr>
                    </table>

                    <div style="margin-top:10px;">
                        <p:commandButton style="width: 300px;font-size: 20px;height: 40px;" value="Add to Cart" icon="fa fa-plus-circle" actionListener="#{viewDetailedManagedBean.addToCart}" update="growl #{p:component('notiNum')}" rendered="#{sessionScope['isLogin']}" /> 
                        <p:commandButton style="width: 300px;font-size: 20px;height: 40px;" value="Add to Cart" icon="fa fa-plus-circle" actionListener="#{viewDetailedManagedBean.addToCart}" update="growl #{p:component('notiNumNoLogin')}" rendered="#{!sessionScope['isLogin']}" />
                    </div>

                </h:form>

            </p:panel>

        </p:panel>

    </ui:define>

    <ui:define name="center" >
        <p:panel style="margin-left: -10px">
            <h:form id="form">
                <p:panel style="text-align: center;font-size:18px">
                    <f:facet name="header">
                        #{viewDetailedManagedBean.product.productName}
                    </f:facet>
                    <p:galleria value="#{viewDetailedManagedBean.images}" var="image">

                        <h:graphicImage name="#{image}" />
                    </p:galleria>
                </p:panel>
            </h:form>
        </p:panel>

    </ui:define>

    <ui:define name="east">
        <p:panel style="margin-top: 13px; width: 450.5px; text-align: center">
          
            <p:panel toggleable="true" header="Description">
                 <span style="color:white;font-size:12px; text-align: justify; word-break: break-all">#{viewDetailedManagedBean.product.description}</span> 
            </p:panel>
            <h:outputText value="THERE ARE NO REVIEWS FOR THIS PRODUCT" rendered="#{empty viewDetailedManagedBean.productReviews}" />
            <p:panel header="Reviews" toggleable="true">
            <p:scrollPanel mode="native" style="width:400px;height:400px;margin-left: -20px;" rendered="#{not empty viewDetailedManagedBean.productReviews}">
                <p:repeat value="#{viewDetailedManagedBean.productReviews}" var="reviewProd">
                    <p:panelGrid columns="2" style="height:100px" >
                        <p:row>
                            <p:column rowspan="2">
                                <p:graphicImage name="images/avatar_review.png" width="100px" height="100px" />
                            </p:column>

                        </p:row>

                        <p:row>
                            <p:column style="text-align: center">
                                #{reviewProd.customerOrder.customer.firstName} #{reviewProd.customerOrder.customer.lastName}
                            </p:column>
                            <p:column style="text-align: center">
                                <p:rating value="#{reviewProd.rating}" readonly="true" />
                            </p:column>

                            <br />
                            <p:column>#{reviewProd.review}</p:column>
                        </p:row>
                    </p:panelGrid>
                    <br />
                </p:repeat>
            </p:scrollPanel>
                </p:panel>
        </p:panel>
    </ui:define>
</ui:composition>
